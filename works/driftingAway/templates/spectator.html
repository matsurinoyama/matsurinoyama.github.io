<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>離れていく — Spectator</title>
    <link rel="icon" type="image/png" href="/static/favicon.png" />
    <link rel="stylesheet" href="/static/css/styles.css?v={{ cache_bust }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+JP:wght@200;400;600&family=New+Tegomin&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- ── Spectator idle screen ────────────────────────────────── -->
    <div class="spectator-idle" id="spectator-idle">
      <h1>離れていく</h1>
      <p class="spectator-idle-sub">
        ミスコミュニケーションについてのインタラクティブ・インスタレーション
      </p>
      <p class="spectator-idle-desc">
        二人が会話をしています —
        でも、お互いの声は直接聞こえません。AIがメッセージを少しだけ変えてから相手に届けます。会話が少しずつずれていく様子をご覧ください。
      </p>
      <p class="spectator-idle-status" id="spectator-idle-status">
        プレイヤーの参加を待っています<span class="waiting-dots"></span>
      </p>
    </div>

    <!-- ── Topic splash (shown for 5s at conversation start) ─────── -->
    <div id="topic-splash" class="topic-splash" hidden>
      <div class="topic-splash-label" id="topic-splash-label">元の話題</div>
      <div class="topic-splash-text" id="topic-splash-text"></div>
    </div>

    <!-- ── Reveal splash (shown for 15s after timer ends) ─────── -->
    <div id="reveal-splash" class="topic-splash" hidden>
      <div class="topic-splash-label" id="reveal-splash-label">会話終了</div>
      <div class="topic-splash-text" id="reveal-splash-text" style="font-size: clamp(1.5rem, 4.5vw, 3.75rem)">
        <span id="reveal-splash-body">会話が終了しました。<br />これから二人で話題について直接話し合ってください。</span><br />
        <span
          id="reveal-splash-sub"
          style="color: var(--fg-dim); font-size: 1.1rem; font-family: var(--font)"
          >15秒後に履歴と元の話題が表示されます</span
        >
      </div>
    </div>

    <div class="spectator-wrapper" id="spectator-main" hidden>
      <!-- ── Timer (top-center, mirrors topic bar height) ────────── -->
      <div class="spectator-timer-row" id="spectator-timer-row">
        <div id="timer" class="spectator-timer">3:00</div>
      </div>

      <div class="spectator-feed" id="spectator-feed"></div>

      <!-- ── Topic bar (bottom) ──────────────────────────────────── -->
      <div class="spectator-topic-bar" id="spectator-topic-bar" hidden>
        <div class="spectator-topic-bar-label">元の話題</div>
        <div
          class="spectator-topic-bar-text"
          id="spectator-topic-bar-text"
        ></div>
      </div>
    </div>

    <script src="/static/js/i18n.js?v={{ cache_bust }}"></script>
    <script src="/static/js/common.js?v={{ cache_bust }}"></script>
    <script src="/static/js/spectator.js?v={{ cache_bust }}"></script>
  </body>
</html>
