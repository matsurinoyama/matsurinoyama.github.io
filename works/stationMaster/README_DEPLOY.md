Heroku and Docker deployment instructions for `stationMaster`\n\nThis document explains two ways to deploy the Flask-based `stationMaster` app: using Heroku's Python buildpack (simpler) or using Docker (recommended for MediaPipe compatibility).\n\n1) Quick Heroku (buildpack) deploy\n\nPrereqs: Heroku CLI installed and logged in. Git repo with these files in `works/stationMaster`.\n\n# From the `works/stationMaster` directory:\n\n# Create app (choose a unique name):\nheroku create your-app-name\n\n# Push to Heroku (from repository root, or create a git repo in this folder):\ngit add .\ngit commit -m "prepare heroku"
git push heroku master\n\nHeroku will detect the `requirements.txt` and `Procfile` and run `gunicorn server:app`.\n\nCaveat: MediaPipe often needs additional native libs and may fail to install on Heroku's default stacks or require an apt buildpack. If you see pip install errors for `mediapipe` or runtime errors about missing shared libraries, switch to the Docker-based deployment below.\n\n2) Recommended: Build and deploy with Docker (Heroku Container Registry or any container host)\n\n# Build locally (from `works/stationMaster`):\ndocker build -t stationmaster:latest .\n\n# Run locally to test:\ndocker run -p 8000:8000 stationmaster:latest\n\n# If you want to push to Heroku's Container Registry (Heroku CLI must be logged in):\nheroku create your-app-name --region eu # optional region
heroku container:login
heroku container:push web --app your-app-name
heroku container:release web --app your-app-name
\n3) Notes and troubleshooting\n\n- Use `opencv-python-headless` in requirements to avoid GUI deps.\n- If MediaPipe pip install fails on Heroku buildpack, the Dockerfile includes apt-get installs that help provide native deps; building in Docker often resolves those issues.\n- Consider switching the heavy MediaPipe processing to an async worker or a separate service if you expect heavy traffic.\n- For local development, set `FLASK_DEBUG=1` to enable debug mode; in production leave it off and use `gunicorn`.\n\nIf you'd like, I can also add a small Procfile variant for running via `heroku local` and add a simple `Makefile` for the common steps.
